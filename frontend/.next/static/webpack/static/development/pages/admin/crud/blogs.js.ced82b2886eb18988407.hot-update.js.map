{"version":3,"file":"static/webpack/static/development/pages/admin/crud/blogs.js.ced82b2886eb18988407.hot-update.js","sources":["webpack:///./components/crud/BlogRead.js"],"sourcesContent":["import Link from 'next/link';\nimport { useState, useEffect } from 'react';\nimport Router from 'next/router';\nimport { getCookie, isAuth } from '../../actions/auth';\nimport { list, removeBlog } from '../../actions/blog';\nimport moment from 'moment';\n\nconst BlogRead = () => {\n    const [blogs, setBlogs] = useState([]);\n    const [message, setMessage] = useState('');\n    const token = getCookie('token');\n\n    useEffect(() => {\n        loadBlogs();\n\n    },[]);\n\n    const loadBlogs = () => {\n        list().then(data => {\n            if(data.error) {\n                console.log(data.error);\n            } else {\n                setBlogs(data);\n            }\n        });\n    };\n\n    const deleteBlog = (slug) => {\n        removeBlog(slug, token).then(data => {\n            if(data.error) {\n                console.log(data.error)\n            } else {\n                setMessage(data.message);\n                loadBlogs();\n            }\n        });\n    }\n\n    const deleteConfirm = () => {\n        let answer = window.confirm('Are you sure you want to delete your blog?');\n        if(answer) {\n            deleteBlog(slug)\n    }\n}\n\n    const showAllBlogs = () => {\n        return blogs.map((blog, i) => {\n            return (\n                <div key={i} className=\"pb-5\">\n                <h3>{blog.title}</h3>\n                <p className=\"mark\">\n                    Written by {blog.postedBy.name} | \n                    Published on {moment(blog.updatedAt).fromNow()}\n                    </p>\n                   \n                    {/* delkete & updated button */}\n                    <button className=\"btn btn-sm btn-danger\" \n                    onClick={() => deleteConfirm(blog.slu)}>Delete</button>\n                     <hr/>\n                </div>\n            )\n        })\n    }\n    return (\n        <>\n            <div className=\"row\">\n                <div className=\"col-md-12\">{showAllBlogs()}</div>\n            </div>\n    \n        </>\n    );\n};\n\nexport default BlogRead;"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AAEA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMA;AACA;AAAA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AACA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AACA;AACA;;;;A","sourceRoot":""}