{"version":3,"file":"static/webpack/static/development/pages/user.js.cf15311e2ef423c80949.hot-update.js","sources":["webpack:///./actions/auth.js"],"sourcesContent":["import fetch from 'isomorphic-fetch';\nimport cookie from 'js-cookie';\nimport { API } from '../config';\n\nexport const signup = user => {\n    return fetch(`${API}/signup`, {\n        method: 'POST',\n        headers: {\n            Accept: 'application/json',\n            'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(user)\n    })\n        .then(response => {\n            return response.json();\n        })\n        .catch(err => console.log(err));\n};\n\nexport const signin = user => {\n    return fetch(`${API}/signin`, {\n        method: 'POST',\n        headers: {\n            Accept: 'application/json',\n            'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(user)\n    })\n        .then(response => {\n            return response.json();\n        })\n        .catch(err => console.log(err));\n};\n\nexport const signout = next => {\n    removeCookie('token');\n    removeLocalStorage('user');\n    next();\n\n    return fetch(`${API}/signout`, {\n        method: 'GET'\n    })\n        .then(response => {\n            console.log('signout success');\n        })\n        .catch(err => console.log(err));\n};\n\n// set cookie\nexport const setCookie = (key, value) => {\n    if (process.browser) {\n        cookie.set(key, value, {\n            expires: 1\n        });\n    }\n};\n\nexport const removeCookie = key => {\n    if (process.browser) {\n        cookie.remove(key, {\n            expires: 1\n        });\n    }\n};\n// get cookie\nexport const getCookie = key => {\n    if (process.browser) {\n        return cookie.get(key);\n    }\n};\n// localstorage\nexport const setLocalStorage = (key, value) => {\n    if (process.browser) {\n        localStorage.setItem(key, JSON.stringify(value));\n    }\n};\n\nexport const removeLocalStorage = key => {\n    if (process.browser) {\n        localStorage.removeItem(key);\n    }\n};\n// autheticate user by pass data to cookie and localstorage\nexport const authenticate = (data, next) => {\n    setCookie('token', data.token);\n    setLocalStorage('user', data.user);\n    next();\n};\n\nexport const isAuth = () => {\n    if (process.browser) {\n        const cookieChecked = getCookie('token');\n        if (cookieChecked) {\n            if (localStorage.getItem('user')) {\n                return JSON.parse(localStorage.getItem('user'));\n            } else {\n                return false;\n            }\n        }\n    }\n};\n\n//update local storage\n\nexport const updateUser = (user, next) => {\n    if(process.browser) {\n        if(localStorage.getItem('user')) {\n            let auth = JSON.parse(localStorage.getItem('user'));\n            auth = user;\n            localStorage.setItem('user', JSON.stringify(auth));\n            next();\n        }\n    }\n}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAFA;AAIA;AANA;AASA;AACA;AACA;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAFA;AAIA;AANA;AASA;AACA;AACA;AAAA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AADA;AAIA;AACA;AACA;AAAA;AACA;AACA;AAEA;AACA;AACA;AACA;AADA;AAGA;AACA;AAEA;AACA;AACA;AACA;AADA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;A","sourceRoot":""}